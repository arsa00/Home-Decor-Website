<div class="container-fluid h-100 w-100 position-fixed top-0 d-flex justify-content-center align-items-center" style="z-index: 3;" *ngIf="addNewObjectMode || continueAddingObject">
    <div class="h-100 w-100 position-absolute top-0 start-0 bg-gray-plt-clr9" style="opacity: 0.8;"></div>
    
    <!-- add new room dialog -->
    <div class="container position-relative" style="z-index: 3;" *ngIf="addNewObjectMode">
        <div class="row justify-content-center align-items-center">
            <div class="col-lg-8 bg-gray-plt-clr1 rounded p-3 position-relative">
                <mat-icon class="position-absolute top-0 end-0 mt-3 me-2 me-sm-4 fs-2 cursor-pointer"  (click)="hideAddNewobject()">
                    cancel
                </mat-icon>

                <h1 class="text-center fw-medium mb-4">Dodajte nov objekat</h1>

                <div class="row justify-content-center align-items-center p-2 gy-3">
                    <div class="col-lg-12">
                        <label class="labels">Tip objekta</label>

                        <select class="form-select"  [(ngModel)]="newObjectType" [ngClass]="{'is-invalid': newObjectTypeErr}">
                            <option value="Stan">Stan</option>
                            <option value="Kuca">Kuca</option>
                        </select>
                    </div>
                    <div class="col-lg-12">
                        <label class="labels">Adresa</label>
                        <input type="text" class="form-control" placeholder="Adresa objekta" name="objAddr" id="objAddr"  
                                    [(ngModel)]="newObjectAddress" [ngClass]="{'is-invalid': newObjectAddressErr}">
                    </div>
                    <div class="col-lg-12">
                        <label for="doorPos">Kvadratura</label>
                        <input type="text" class="form-control" placeholder="Kvadratura objekta" name="objSqaureFootage" id="objSqaureFootage"  
                                    [(ngModel)]="newObjectSquareFootage" [ngClass]="{'is-invalid': newObjectSquareFootageErr}">   
                    </div>
                    <div class="col-lg-5">
                        <button type="button" class="btn btn-outline-plt1-clr2 fw-medium w-100 my-2" (click)="addNewObject()">Dodajte objekat</button>
                    </div>
                </div>
            </div>
        </div>
       
    </div>

    <div class="container position-relative" style="z-index: 3;" *ngIf="continueAddingObject">
        <div class="row justify-content-center align-items-center">
            <div class="col-lg-8 bg-gray-plt-clr1 rounded p-3 position-relative">

                <h1 class="text-center fw-medium mb-4">Objekat uspesno dodat</h1>

                <div class="row justify-content-center align-items-center p-2 gy-3">
                    <div class="col-lg-12 text-center">
                        <p class="fs-5">Sada je potrebno da uneste sobe i napravite raspored kakav želite.</p>
                        <p class="fs-5">To možete uraditi u <span class="fw-medium">prostoru za skiciranje</span>.</p>
                    </div>
                    <div class="col-lg-5">
                        <button class="btn btn-outline-plt1-clr2 fw-medium w-100 my-2" (click)="hideContinueAddingAndScroll()">
                            U redu
                        </button>
                    </div>
                </div>
            </div>
        </div>
       
    </div>

</div>

<h1 class="fs-1 text-center fw-medium mt-5 mb-3 text-gray-plt-clr9"> Vaši objekti </h1>


<div class="container-fluid p-3 mt-5 mb-1">
    <div class="d-flex justify-content-start mb-3">
        <button type="button" class="btn btn-plt1-clr6 text-white fw-medium" (click)="showAddNewobject()">+ Kreirajte objekat</button>
    </div>
    <div class="row gy-4">
        
        <div class="col-md-3" *ngFor="let apartment of allApartments; let i = index">
            <div class="card border border-2 border-black apartmentCard" [ngClass]="{'border-3': selectedIndex == i}" 
                        (click)="setActive(i)">
                <div class="card-body" [ngClass]="{'bg-plt1-clr5': selectedIndex == i}">
                    <div class="d-flex justify-content-between align-items-center mb-4 fs-5">
                        <span class="mx-3 fw-medium">Tip objekta:</span>
                        <span class="text-end" *ngIf="!showEditField(i)"> {{ allApartments[i].type }} </span>
                        <!-- <input type="text" class="form-control" value="" [(ngModel)]="selectedApartment.type" *ngIf="showEditField(i)"> -->

                        <select class="form-select"  [(ngModel)]="selectedApartment.type" *ngIf="showEditField(i)">
                            <option value="Stan">Stan</option>
                            <option value="Kuca">Kuca</option>
                        </select>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mb-4 fs-5">
                        <span class="mx-3 fw-medium">Adresa:</span>
                        <span class="text-end" *ngIf="!showEditField(i)"> {{ allApartments[i].address }} </span>
                        <input type="text" class="form-control" value=""  [(ngModel)]="selectedApartment.address" *ngIf="showEditField(i)">
                    </div>

                    <div class="d-flex justify-content-between align-items-center mb-4 fs-5">
                        <span class="mx-3 fw-medium">Kvadratura:</span>
                        <span class="text-end" *ngIf="!showEditField(i)"> {{ allApartments[i].squareFootage }} </span>
                        <input type="text" class="form-control" value="" [(ngModel)]="selectedApartment.squareFootage" *ngIf="showEditField(i)">
                    </div>

                    <div class="d-flex justify-content-between align-items-center mb-4 fs-5">
                        <span class="mx-3 fw-medium">Broj prostorija:</span>
                        <span class="text-end" *ngIf="!showEditField(i)"> {{ allApartments[i].roomSketches.length }} </span>
                        <input type="text" class="form-control" value="" [(ngModel)]="selectedApartment.roomSketches.length" *ngIf="showEditField(i)" readonly>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


<app-apartment-sketch id="apartmentSketchCanvas" [updateProgressModeIn]="false" [showProgressIn]="false" [editModeIn]="editMode" [apartmentSkecthIn]="selectedApartment"></app-apartment-sketch>


<div class="editButton bg-plt1-clr10 d-flex justify-content-center align-items-center cursor-pointer" *ngIf="!editMode"
            (click)="activateEditMode()">
    <mat-icon class="circleIcon">
        edit
    </mat-icon>
</div>

<div class="editButton bg-plt1-clr1 d-flex justify-content-center align-items-center cursor-pointer" *ngIf="editMode"
            (click)="discardEdit()">
    <mat-icon class="circleIcon">
        close
    </mat-icon>
</div>

<div class="editButton bg-plt1-clr6 d-flex justify-content-center align-items-center cursor-pointer" style="right: 110px;" *ngIf="editMode"
            (click)="submitEdit()">
    <mat-icon class="circleIcon">
        check
    </mat-icon>
</div>
