<div class="container h-100">
    <div class="row h-100 justify-content-center align-items-center px-3 px-md-0">

         <!-- displayed while witing for answer from server-->
         <div class="d-flex justify-content-center" *ngIf="!isRecoveryLinkChecked">
            <mat-spinner></mat-spinner>
        </div>

        <!-- displayed if recovery link is VALID -->
        <div class="col-lg-5 shadow px-2 px-md-5 pb-3 pt-3 text-center" *ngIf="isRecoveryLinkChecked && !recoveryLinkErr">
            <h1 class="fs-2 mb-4">Resetovanje lozinke</h1>

            <form class="d-flex align-items-center flex-column">

                <div class="input-group mt-3" [ngClass]="{'mb-3': passwordErr}">
                    <span class="input-group-text bg-plt1-clr6" id="pass-addon"><mat-icon>lock</mat-icon></span>

                    <div class="form-floating position-relative">
                        <input *ngIf="isPassHidden" type="password" name="pass" [(ngModel)]="password" [ngClass]="{'is-invalid': passwordErr}" class="form-control" id="password" placeholder="Nova lozinka" aria-label="Password" aria-describedby="pass-addon" (click)="passwordInputClicked()">
                        <input *ngIf="!isPassHidden" type="text" name="pass" [(ngModel)]="password" [ngClass]="{'is-invalid': passwordErr}" class="form-control" id="password" placeholder="Nova lozinka" aria-label="Password" aria-describedby="pass-addon" (click)="passwordInputClicked()">

                        <label for="password">Nova lozinka</label>

                        <mat-icon *ngIf="isPassHidden" class="position-absolute cursor-pointer" style="bottom: 17px; right: 30px;" (click)="tooglePassVisibility()">
                            visibility_off
                        </mat-icon>
                        <mat-icon *ngIf="!isPassHidden" class="position-absolute cursor-pointer" style="bottom: 17px; right: 30px;" (click)="tooglePassVisibility()">
                            visibility_on
                        </mat-icon>

                        <div class="invalid-tooltip">
                            * Unesite ispravnu lozinku
                        </div>   

                    </div>
                </div>

                <div class="input-group mt-3" [ngClass]="{'mb-3': passwordErr}">
                    <span class="input-group-text bg-plt1-clr6" id="pass-addon"><mat-icon>lock</mat-icon></span>

                    <div class="form-floating position-relative">
                        <input *ngIf="isRPassHidden" type="password" name="passRepeat" [(ngModel)]="passRepeat" [ngClass]="{'is-invalid': passwordErr}" class="form-control" id="passRepeat" placeholder="Potvrda nove lozinke" aria-label="passRepeat" aria-describedby="pass-addon" (click)="passwordInputClicked()">
                        <input *ngIf="!isRPassHidden" type="text" name="passRepeat" [(ngModel)]="passRepeat" [ngClass]="{'is-invalid': passwordErr}" class="form-control" id="passRepeat" placeholder="Potvrda nove lozinke" aria-label="passRepeat" aria-describedby="pass-addon" (click)="passwordInputClicked()">

                        <label for="passRepeat">Potvrda nove lozinke</label>

                        <mat-icon *ngIf="isRPassHidden" class="position-absolute cursor-pointer" style="bottom: 17px; right: 30px;" (click)="toogleRPassVisibility()">
                            visibility_off
                        </mat-icon>
                        <mat-icon *ngIf="!isRPassHidden" class="position-absolute cursor-pointer" style="bottom: 17px; right: 30px;" (click)="toogleRPassVisibility()">
                            visibility_on
                        </mat-icon>

                        <div class="invalid-tooltip">
                            * Unesite potvrdu lozinke
                        </div>   

                    </div>
                </div>

                <div class="full-width errorText text-start mt-4">
                    <ul>
                        <li *ngFor="let msg of errMessages">{{ msg }}</li>
                    </ul>
                </div>

                <button type="button" class="btn btn-plt1-clr9 fs-5 my-2 full-width" (click)="changePass()">Promenite lozinku</button>

            </form>

        </div>

        <!-- displayed if recovery link is NOT VALID -->
        <div class="col-10 text-center p-5 fs-3" *ngIf="isRecoveryLinkChecked && recoveryLinkErr">
            <mat-icon class="fs-2">
                    sentiment_dissatisfied
            </mat-icon>

            <div class="mt-3">Na≈æalost, link nije ispravan</div>
        </div>
    </div>
</div>